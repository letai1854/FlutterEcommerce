2025-05-06 14:56:54.053 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Starting ProductControllerIntegrationTest using Java 17.0.12 with PID 7880 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-06 14:56:54.087 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-06 14:56:56.360 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-06 14:56:56.618 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 235 ms. Found 7 JPA repository interfaces.
2025-05-06 14:56:58.028 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-06 14:56:58.509 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@143fefaf
2025-05-06 14:56:58.523 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-06 14:56:58.662 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-06 14:56:58.871 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-06 14:56:58.993 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-06 14:57:00.348 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-06 14:57:00.517 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-06 14:57:03.671 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-06 14:57:03.684 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 14:57:03.744 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-06 14:57:03.772 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-06 14:57:03.780 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-06 14:57:04.630 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-06 14:57:06.671 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-06 14:57:07.243 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-06 14:57:08.189 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@21ec7946, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1b5b650d, org.springframework.security.web.context.SecurityContextHolderFilter@4c1ce13a, org.springframework.security.web.header.HeaderWriterFilter@3bbb5b2, org.springframework.web.filter.CorsFilter@38a7f7a2, org.springframework.security.web.authentication.logout.LogoutFilter@46309fa8, demo.com.example.testserver.user.security.JwtAuthenticationFilter@5a885113, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2896e105, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@658ec00c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27ca3040, org.springframework.security.web.session.SessionManagementFilter@3c0cfaad, org.springframework.security.web.access.ExceptionTranslationFilter@1529406e, org.springframework.security.web.access.intercept.AuthorizationFilter@2a621df3]
2025-05-06 14:57:08.717 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-06 14:57:08.717 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-06 14:57:08.720 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-06 14:57:08.766 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Started ProductControllerIntegrationTest in 15.663 seconds (process running for 19.523)
2025-05-06 14:57:10.207 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0
2025-05-06 14:57:10.265 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-06 14:57:10.300 [main] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.ngay_tao,c1_0.hinh_anh,c1_0.ten_danh_muc,c1_0.ngay_cap_nhat from danh_muc c1_0
2025-05-06 14:57:10.308 [main] DEBUG org.hibernate.SQL - select b1_0.id,b1_0.ngay_tao,b1_0.ten_thuong_hieu,b1_0.ngay_cap_nhat from thuong_hieu b1_0
2025-05-06 14:57:10.430 [main] DEBUG org.hibernate.SQL - insert into danh_muc (ngay_tao,hinh_anh,ten_danh_muc,ngay_cap_nhat) values (?,?,?,?)
2025-05-06 14:57:10.518 [main] DEBUG org.hibernate.SQL - insert into thuong_hieu (ngay_tao,ten_thuong_hieu,ngay_cap_nhat) values (?,?,?)
2025-05-06 14:57:10.816 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 14:57:11.042 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 14:57:11.056 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 14:57:11.079 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 4025, SQLState: 23000
2025-05-06 14:57:11.081 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - CONSTRAINT `CONSTRAINT_1` failed for `ecommerdb`.`san_pham`
2025-05-06 14:57:11.309 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 14:57:11.318 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-06 14:57:11.374 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-06 15:03:18.595 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Starting ProductControllerIntegrationTest using Java 17.0.12 with PID 18976 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-06 15:03:18.599 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-06 15:03:20.630 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-06 15:03:20.817 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 173 ms. Found 7 JPA repository interfaces.
2025-05-06 15:03:22.117 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-06 15:03:22.574 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2726a511
2025-05-06 15:03:22.579 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-06 15:03:22.671 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-06 15:03:22.802 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-06 15:03:22.900 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-06 15:03:23.765 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-06 15:03:23.963 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-06 15:03:26.264 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-06 15:03:26.268 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 15:03:26.315 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-06 15:03:26.351 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-06 15:03:26.362 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-06 15:03:27.019 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-06 15:03:29.427 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-06 15:03:30.019 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-06 15:03:31.135 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@726bbe64, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7eb91b95, org.springframework.security.web.context.SecurityContextHolderFilter@242270ae, org.springframework.security.web.header.HeaderWriterFilter@677f1963, org.springframework.web.filter.CorsFilter@74a89061, org.springframework.security.web.authentication.logout.LogoutFilter@37495d56, demo.com.example.testserver.user.security.JwtAuthenticationFilter@6cdfae17, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@46ccf22, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bb92a71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a596879, org.springframework.security.web.session.SessionManagementFilter@69894182, org.springframework.security.web.access.ExceptionTranslationFilter@92adb3b, org.springframework.security.web.access.intercept.AuthorizationFilter@d303dc9]
2025-05-06 15:03:31.716 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-06 15:03:31.716 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-06 15:03:31.717 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-05-06 15:03:31.777 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Started ProductControllerIntegrationTest in 13.91 seconds (process running for 16.727)
2025-05-06 15:03:32.797 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0
2025-05-06 15:03:32.821 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-06 15:03:32.824 [main] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.ngay_tao,c1_0.hinh_anh,c1_0.ten_danh_muc,c1_0.ngay_cap_nhat from danh_muc c1_0
2025-05-06 15:03:32.834 [main] DEBUG org.hibernate.SQL - select b1_0.id,b1_0.ngay_tao,b1_0.ten_thuong_hieu,b1_0.ngay_cap_nhat from thuong_hieu b1_0
2025-05-06 15:03:32.889 [main] DEBUG org.hibernate.SQL - insert into danh_muc (ngay_tao,hinh_anh,ten_danh_muc,ngay_cap_nhat) values (?,?,?,?)
2025-05-06 15:03:32.921 [main] DEBUG org.hibernate.SQL - insert into thuong_hieu (ngay_tao,ten_thuong_hieu,ngay_cap_nhat) values (?,?,?)
2025-05-06 15:03:33.099 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 15:03:33.317 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 15:03:33.481 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 15:03:33.488 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-06 15:03:33.522 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-06 17:32:30.019 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Starting ProductControllerIntegrationTest using Java 17.0.12 with PID 18864 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-06 17:32:30.029 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-06 17:32:31.914 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-06 17:32:32.094 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 159 ms. Found 7 JPA repository interfaces.
2025-05-06 17:32:33.440 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-06 17:32:33.950 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4137aab0
2025-05-06 17:32:33.970 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-06 17:32:34.113 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-06 17:32:34.263 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-06 17:32:34.378 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-06 17:32:35.342 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-06 17:32:35.546 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-06 17:32:37.754 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-06 17:32:37.762 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:32:37.799 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-06 17:32:37.830 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-06 17:32:37.841 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-06 17:32:38.649 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-06 17:32:40.787 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-06 17:32:41.270 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-06 17:32:42.180 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4fd7c296, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d9ef371, org.springframework.security.web.context.SecurityContextHolderFilter@19a5d711, org.springframework.security.web.header.HeaderWriterFilter@6f3af541, org.springframework.web.filter.CorsFilter@d303dc9, org.springframework.security.web.authentication.logout.LogoutFilter@70915da3, demo.com.example.testserver.user.security.JwtAuthenticationFilter@c5a4358, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@69894182, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7738b226, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39e67fbc, org.springframework.security.web.session.SessionManagementFilter@b42a630, org.springframework.security.web.access.ExceptionTranslationFilter@254ed9ba, org.springframework.security.web.access.intercept.AuthorizationFilter@6d0937e]
2025-05-06 17:32:42.880 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-06 17:32:42.881 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-06 17:32:42.884 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-06 17:32:42.937 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Started ProductControllerIntegrationTest in 13.58 seconds (process running for 16.474)
2025-05-06 17:32:43.888 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0
2025-05-06 17:32:43.906 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-06 17:32:43.909 [main] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.ngay_tao,c1_0.hinh_anh,c1_0.ten_danh_muc,c1_0.ngay_cap_nhat from danh_muc c1_0
2025-05-06 17:32:43.914 [main] DEBUG org.hibernate.SQL - select b1_0.id,b1_0.ngay_tao,b1_0.ten_thuong_hieu,b1_0.ngay_cap_nhat from thuong_hieu b1_0
2025-05-06 17:32:43.967 [main] DEBUG org.hibernate.SQL - insert into danh_muc (ngay_tao,hinh_anh,ten_danh_muc,ngay_cap_nhat) values (?,?,?,?)
2025-05-06 17:32:44.003 [main] DEBUG org.hibernate.SQL - insert into thuong_hieu (ngay_tao,ten_thuong_hieu,ngay_cap_nhat) values (?,?,?)
2025-05-06 17:32:44.153 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.273 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.284 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.290 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.298 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.301 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.308 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.316 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.318 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.320 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:32:44.391 [main] INFO  d.c.e.t.p.s.impl.ProductServiceImpl - Finding top-selling products (placeholder logic) with page: Page request [number: 0, size 10, sort: UNSORTED]
2025-05-06 17:32:44.438 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0 where 1=1 order by p1_0.average_rating desc,p1_0.ngay_tao desc limit ?,?
2025-05-06 17:32:44.569 [main] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$PlainPageSerializationWarning - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-05-06 17:32:44.764 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:32:44.769 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-06 17:32:44.781 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-06 17:36:54.949 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Starting ProductControllerIntegrationTest using Java 17.0.12 with PID 13820 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-06 17:36:54.952 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-06 17:36:56.951 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-06 17:36:57.146 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 179 ms. Found 7 JPA repository interfaces.
2025-05-06 17:36:58.978 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-06 17:36:59.489 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5b48f0f4
2025-05-06 17:36:59.531 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-06 17:36:59.658 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-06 17:36:59.832 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-06 17:37:00.002 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-06 17:37:01.090 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-06 17:37:01.313 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-06 17:37:03.663 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-06 17:37:03.669 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:37:03.706 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-06 17:37:03.742 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-06 17:37:03.747 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-06 17:37:04.517 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-06 17:37:06.825 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-06 17:37:07.468 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-06 17:37:08.503 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33dbd53, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33260ecd, org.springframework.security.web.context.SecurityContextHolderFilter@7738b226, org.springframework.security.web.header.HeaderWriterFilter@73d8f219, org.springframework.web.filter.CorsFilter@626db270, org.springframework.security.web.authentication.logout.LogoutFilter@1546a589, demo.com.example.testserver.user.security.JwtAuthenticationFilter@673e239b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3c288a4e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4a100df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24ab83c8, org.springframework.security.web.session.SessionManagementFilter@46ccf22, org.springframework.security.web.access.ExceptionTranslationFilter@1d95957c, org.springframework.security.web.access.intercept.AuthorizationFilter@74a89061]
2025-05-06 17:37:09.140 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-06 17:37:09.141 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-06 17:37:09.146 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-06 17:37:09.252 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Started ProductControllerIntegrationTest in 15.017 seconds (process running for 18.283)
2025-05-06 17:37:10.556 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0
2025-05-06 17:37:10.587 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-06 17:37:10.596 [main] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.ngay_tao,c1_0.hinh_anh,c1_0.ten_danh_muc,c1_0.ngay_cap_nhat from danh_muc c1_0
2025-05-06 17:37:10.607 [main] DEBUG org.hibernate.SQL - select b1_0.id,b1_0.ngay_tao,b1_0.ten_thuong_hieu,b1_0.ngay_cap_nhat from thuong_hieu b1_0
2025-05-06 17:37:10.681 [main] DEBUG org.hibernate.SQL - insert into danh_muc (ngay_tao,hinh_anh,ten_danh_muc,ngay_cap_nhat) values (?,?,?,?)
2025-05-06 17:37:10.725 [main] DEBUG org.hibernate.SQL - insert into thuong_hieu (ngay_tao,ten_thuong_hieu,ngay_cap_nhat) values (?,?,?)
2025-05-06 17:37:10.960 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.136 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.142 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.147 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.154 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.157 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.168 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.176 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.181 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.186 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.191 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.195 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:37:11.358 [main] INFO  d.c.e.t.p.s.impl.ProductServiceImpl - Finding top-discounted products with page: Page request [number: 0, size 10, sort: UNSORTED]
2025-05-06 17:37:11.458 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0 where p1_0.phan_tram_giam_gia is not null and p1_0.phan_tram_giam_gia>? order by p1_0.phan_tram_giam_gia desc limit ?,?
2025-05-06 17:37:11.625 [main] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$PlainPageSerializationWarning - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-05-06 17:37:11.927 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:37:11.942 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-06 17:37:11.959 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-06 17:38:05.993 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Starting ProductControllerIntegrationTest using Java 17.0.12 with PID 4220 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-06 17:38:05.996 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-06 17:38:07.872 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-06 17:38:08.170 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 282 ms. Found 7 JPA repository interfaces.
2025-05-06 17:38:10.263 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-06 17:38:10.714 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5b48f0f4
2025-05-06 17:38:10.717 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-06 17:38:10.836 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-06 17:38:10.996 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-06 17:38:11.094 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-06 17:38:12.289 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-06 17:38:12.456 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-06 17:38:15.027 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-06 17:38:15.031 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:38:15.073 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-06 17:38:15.105 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-06 17:38:15.110 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-06 17:38:16.015 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-06 17:38:18.330 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-06 17:38:18.847 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-06 17:38:19.811 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33dbd53, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33260ecd, org.springframework.security.web.context.SecurityContextHolderFilter@7738b226, org.springframework.security.web.header.HeaderWriterFilter@73d8f219, org.springframework.web.filter.CorsFilter@626db270, org.springframework.security.web.authentication.logout.LogoutFilter@1546a589, demo.com.example.testserver.user.security.JwtAuthenticationFilter@673e239b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3c288a4e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4a100df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24ab83c8, org.springframework.security.web.session.SessionManagementFilter@46ccf22, org.springframework.security.web.access.ExceptionTranslationFilter@1d95957c, org.springframework.security.web.access.intercept.AuthorizationFilter@74a89061]
2025-05-06 17:38:20.432 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-06 17:38:20.432 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-06 17:38:20.434 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-05-06 17:38:20.502 [main] INFO  d.c.e.t.p.c.ProductControllerIntegrationTest - Started ProductControllerIntegrationTest in 15.189 seconds (process running for 18.039)
2025-05-06 17:38:21.832 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0
2025-05-06 17:38:21.852 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-06 17:38:21.857 [main] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.ngay_tao,c1_0.hinh_anh,c1_0.ten_danh_muc,c1_0.ngay_cap_nhat from danh_muc c1_0
2025-05-06 17:38:21.869 [main] DEBUG org.hibernate.SQL - select b1_0.id,b1_0.ngay_tao,b1_0.ten_thuong_hieu,b1_0.ngay_cap_nhat from thuong_hieu b1_0
2025-05-06 17:38:21.924 [main] DEBUG org.hibernate.SQL - insert into danh_muc (ngay_tao,hinh_anh,ten_danh_muc,ngay_cap_nhat) values (?,?,?,?)
2025-05-06 17:38:21.954 [main] DEBUG org.hibernate.SQL - insert into thuong_hieu (ngay_tao,ten_thuong_hieu,ngay_cap_nhat) values (?,?,?)
2025-05-06 17:38:22.149 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.300 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.309 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.318 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.322 [main] DEBUG org.hibernate.SQL - insert into san_pham (average_rating,thuong_hieu_id,danh_muc_id,ngay_tao,mo_ta,phan_tram_giam_gia,anh_chinh_url,max_price,min_price,ten_san_pham,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.330 [main] DEBUG org.hibernate.SQL - insert into bien_the_san_pham (ngay_tao,ten_bien_the,gia,san_pham_id,sku,so_luong_ton_kho,ngay_cap_nhat,hinh_anh_bien_the_url) values (?,?,?,?,?,?,?,?)
2025-05-06 17:38:22.436 [main] INFO  d.c.e.t.p.s.impl.ProductServiceImpl - Finding top-discounted products with page: Page request [number: 0, size 10, sort: UNSORTED]
2025-05-06 17:38:22.514 [main] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.average_rating,p1_0.thuong_hieu_id,p1_0.danh_muc_id,p1_0.ngay_tao,p1_0.mo_ta,p1_0.phan_tram_giam_gia,p1_0.anh_chinh_url,p1_0.max_price,p1_0.min_price,p1_0.ten_san_pham,p1_0.ngay_cap_nhat from san_pham p1_0 where p1_0.phan_tram_giam_gia is not null and p1_0.phan_tram_giam_gia>? order by p1_0.phan_tram_giam_gia desc limit ?,?
2025-05-06 17:38:22.743 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-06 17:38:22.749 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-06 17:38:22.763 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
