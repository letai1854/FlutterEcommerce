2025-05-05 23:09:57.181 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Starting UserControllerIntegrationTest using Java 17.0.12 with PID 142468 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-05 23:09:57.184 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-05 23:09:59.395 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-05 23:09:59.581 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 170 ms. Found 7 JPA repository interfaces.
2025-05-05 23:10:00.598 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-05 23:10:00.984 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5b48f0f4
2025-05-05 23:10:00.990 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-05 23:10:01.101 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-05 23:10:01.229 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-05 23:10:01.309 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-05 23:10:02.111 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-05 23:10:02.283 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-05 23:10:04.820 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-05 23:10:04.827 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:10:04.863 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-05 23:10:04.881 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-05 23:10:04.885 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-05 23:10:05.532 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-05 23:10:07.261 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-05 23:10:07.662 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-05 23:10:08.412 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a596879, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35ee7dc8, org.springframework.security.web.context.SecurityContextHolderFilter@620978eb, org.springframework.security.web.header.HeaderWriterFilter@1d95957c, org.springframework.web.filter.CorsFilter@33dbd53, org.springframework.security.web.authentication.logout.LogoutFilter@6fe37577, demo.com.example.testserver.user.security.JwtAuthenticationFilter@673e239b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7738b226, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68317dc0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33260ecd, org.springframework.security.web.session.SessionManagementFilter@242270ae, org.springframework.security.web.access.ExceptionTranslationFilter@6622f6b4, org.springframework.security.web.access.intercept.AuthorizationFilter@726bbe64]
2025-05-05 23:10:08.885 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-05 23:10:08.887 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-05 23:10:08.889 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-05 23:10:08.942 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Started UserControllerIntegrationTest in 12.695 seconds (process running for 15.314)
2025-05-05 23:10:10.019 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0
2025-05-05 23:10:10.045 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-05 23:10:10.336 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:10:10.536 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-05 23:10:10.567 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:10:10.570 [main] INFO  d.c.e.t.u.controller.AuthController - User registered successfully: ID [163], Email [test@example.com]
2025-05-05 23:10:10.821 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:10:11.031 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:10:11.034 [main] INFO  d.c.e.t.u.controller.AuthController - User [test@example.com] logged in successfully.
2025-05-05 23:10:11.094 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:10:11.102 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:10:11.121 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:10:11.149 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat,a1_0.nguoi_dung_id,a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat from nguoi_dung u1_0 left join danh_sach_dia_chi a1_0 on u1_0.id=a1_0.nguoi_dung_id where u1_0.id=?
2025-05-05 23:10:11.158 [main] DEBUG org.hibernate.SQL - select sm1_0.nguoi_gui_id,sm1_0.id,sm1_0.noi_dung,sm1_0.cuoc_hoi_thoai_id,sm1_0.url_hinh_anh,sm1_0.thoi_gian_gui from tin_nhan sm1_0 where sm1_0.nguoi_gui_id=?
2025-05-05 23:10:11.166 [main] DEBUG org.hibernate.SQL - select r1_0.nguoi_dung_id,r1_0.id,r1_0.ten_nguoi_danh_gia_an_danh,r1_0.binh_luan,r1_0.san_pham_id,r1_0.diem_sao,r1_0.thoi_gian_danh_gia from danh_gia_san_pham r1_0 where r1_0.nguoi_dung_id=?
2025-05-05 23:10:11.168 [main] DEBUG org.hibernate.SQL - select o1_0.nguoi_dung_id,o1_0.id,o1_0.ma_giam_gia_id,o1_0.tien_giam_gia_coupon,o1_0.ngay_dat_hang,o1_0.trang_thai_don_hang,o1_0.phuong_thuc_thanh_toan,o1_0.trang_thai_thanh_toan,o1_0.tien_su_dung_diem,o1_0.diem_tich_luy,o1_0.ten_nguoi_nhan,o1_0.so_dien_thoai_nguoi_nhan,o1_0.dia_chi_giao_hang,o1_0.phi_van_chuyen,o1_0.tong_tien_hang_goc,o1_0.thue,o1_0.tong_thanh_toan,o1_0.ngay_cap_nhat from don_hang o1_0 where o1_0.nguoi_dung_id=?
2025-05-05 23:10:11.170 [main] DEBUG org.hibernate.SQL - select cc1_0.nguoi_dung_id,cc1_0.id,cc1_0.admin_id,cc1_0.ngay_tao,cc1_0.trang_thai,cc1_0.tieu_de,cc1_0.ngay_cap_nhat from cuoc_hoi_thoai cc1_0 where cc1_0.nguoi_dung_id=?
2025-05-05 23:10:11.171 [main] DEBUG org.hibernate.SQL - select ci1_0.nguoi_dung_id,ci1_0.id,ci1_0.ngay_them_vao,ci1_0.bien_the_san_pham_id,ci1_0.so_luong,ci1_0.session_id,ci1_0.ngay_cap_nhat from gio_hang ci1_0 where ci1_0.nguoi_dung_id=?
2025-05-05 23:10:11.172 [main] DEBUG org.hibernate.SQL - select ac1_0.admin_id,ac1_0.id,ac1_0.ngay_tao,ac1_0.nguoi_dung_id,ac1_0.trang_thai,ac1_0.tieu_de,ac1_0.ngay_cap_nhat from cuoc_hoi_thoai ac1_0 where ac1_0.admin_id=?
2025-05-05 23:10:11.236 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:10:11.246 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:10:11.260 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.id=? and a1_0.nguoi_dung_id=?
2025-05-05 23:10:11.276 [main] INFO  d.c.e.t.u.service.AddressServiceImpl - Deleted address with ID 50 for user test@example.com
2025-05-05 23:10:11.281 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:10:11.291 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:10:11.490 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:10:11.494 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-05 23:10:11.593 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-05 23:14:11.993 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Starting UserControllerIntegrationTest using Java 17.0.12 with PID 86352 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-05 23:14:11.996 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-05 23:14:13.799 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-05 23:14:13.985 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 172 ms. Found 7 JPA repository interfaces.
2025-05-05 23:14:15.312 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-05 23:14:15.732 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@747f6c5a
2025-05-05 23:14:15.744 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-05 23:14:15.886 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-05 23:14:16.021 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-05 23:14:16.099 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-05 23:14:16.787 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-05 23:14:16.954 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-05 23:14:19.211 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-05 23:14:19.215 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:14:19.259 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-05 23:14:19.276 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-05 23:14:19.282 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-05 23:14:20.076 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-05 23:14:22.064 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-05 23:14:22.572 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-05 23:14:23.536 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7eb91b95, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74a89061, org.springframework.security.web.context.SecurityContextHolderFilter@704a0f9, org.springframework.security.web.header.HeaderWriterFilter@6622f6b4, org.springframework.web.filter.CorsFilter@1a596879, org.springframework.security.web.authentication.logout.LogoutFilter@24546513, demo.com.example.testserver.user.security.JwtAuthenticationFilter@21618f32, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@620978eb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3bbb5b2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35ee7dc8, org.springframework.security.web.session.SessionManagementFilter@500a6c2f, org.springframework.security.web.access.ExceptionTranslationFilter@3182b7a2, org.springframework.security.web.access.intercept.AuthorizationFilter@39e67fbc]
2025-05-05 23:14:24.102 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-05 23:14:24.102 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-05 23:14:24.107 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2025-05-05 23:14:24.155 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Started UserControllerIntegrationTest in 12.952 seconds (process running for 15.332)
2025-05-05 23:14:25.011 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0
2025-05-05 23:14:25.028 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-05 23:14:25.326 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:14:25.550 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-05 23:14:25.587 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:14:25.593 [main] INFO  d.c.e.t.u.controller.AuthController - User registered successfully: ID [164], Email [test@example.com]
2025-05-05 23:14:25.824 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:14:26.011 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:14:26.013 [main] INFO  d.c.e.t.u.controller.AuthController - User [test@example.com] logged in successfully.
2025-05-05 23:14:26.070 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:14:26.081 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:14:26.100 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:14:26.114 [main] DEBUG org.hibernate.SQL - select a1_0.nguoi_dung_id,a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:14:26.166 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:14:26.177 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:14:26.189 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.id=? and a1_0.nguoi_dung_id=?
2025-05-05 23:14:26.200 [main] INFO  d.c.e.t.u.service.AddressServiceImpl - Deleted address with ID 52 for user test@example.com
2025-05-05 23:14:26.205 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:14:26.215 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:14:26.358 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:14:26.364 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-05 23:14:26.390 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-05 23:18:14.797 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Starting UserControllerIntegrationTest using Java 17.0.12 with PID 136880 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-05 23:18:14.800 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-05 23:18:17.041 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-05 23:18:17.237 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 179 ms. Found 7 JPA repository interfaces.
2025-05-05 23:18:18.512 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-05 23:18:18.925 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@682e422c
2025-05-05 23:18:18.938 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-05 23:18:19.023 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-05 23:18:19.215 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-05 23:18:19.422 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-05 23:18:20.488 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-05 23:18:20.725 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-05 23:18:22.944 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-05 23:18:22.951 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:18:22.984 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-05 23:18:23.001 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-05 23:18:23.004 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-05 23:18:23.806 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-05 23:18:26.054 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-05 23:18:26.645 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-05 23:18:27.456 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3565ee15, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4fe3d15f, org.springframework.security.web.context.SecurityContextHolderFilter@92adb3b, org.springframework.security.web.header.HeaderWriterFilter@5e805a0d, org.springframework.web.filter.CorsFilter@37495d56, org.springframework.security.web.authentication.logout.LogoutFilter@6add626f, demo.com.example.testserver.user.security.JwtAuthenticationFilter@52a2c66, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@677f1963, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7892d7a7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24546513, org.springframework.security.web.session.SessionManagementFilter@6f3af541, org.springframework.security.web.access.ExceptionTranslationFilter@3bfb81be, org.springframework.security.web.access.intercept.AuthorizationFilter@70915da3]
2025-05-05 23:18:28.033 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-05 23:18:28.034 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-05 23:18:28.036 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-05 23:18:28.086 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Started UserControllerIntegrationTest in 14.362 seconds (process running for 17.254)
2025-05-05 23:18:29.511 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0
2025-05-05 23:18:29.555 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-05 23:18:29.989 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:18:30.281 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-05 23:18:30.327 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:18:30.341 [main] INFO  d.c.e.t.u.controller.AuthController - User registered successfully: ID [165], Email [test@example.com]
2025-05-05 23:18:30.758 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:18:30.947 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:18:30.950 [main] INFO  d.c.e.t.u.controller.AuthController - User [test@example.com] logged in successfully.
2025-05-05 23:18:31.008 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:18:31.016 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:18:31.042 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:18:31.088 [main] DEBUG org.hibernate.SQL - select a1_0.nguoi_dung_id,a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:18:31.227 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:18:31.246 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:18:31.260 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.id=? and a1_0.nguoi_dung_id=?
2025-05-05 23:18:31.263 [main] INFO  d.c.e.t.u.service.AddressServiceImpl - Removed address with ID 54 for user test@example.com
2025-05-05 23:18:31.419 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:18:31.424 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-05 23:18:31.439 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-05 23:20:00.497 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Starting UserControllerIntegrationTest using Java 17.0.12 with PID 131088 (started by Minh in E:\Flutter\Ecommerce\FlutterEcommerce\Server)
2025-05-05 23:20:00.502 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - The following 1 profile is active: "dev"
2025-05-05 23:20:02.642 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-05 23:20:02.839 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 176 ms. Found 7 JPA repository interfaces.
2025-05-05 23:20:04.037 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-05 23:20:04.499 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72c9ebfa
2025-05-05 23:20:04.505 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-05 23:20:04.597 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-05 23:20:04.738 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-05-05 23:20:04.834 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-05 23:20:05.746 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-05 23:20:05.955 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-05-05 23:20:08.462 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-05 23:20:08.466 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:20:08.574 [main] INFO  d.c.e.t.c.s.ImageStorageService - Image storage directory created/initialized at: E:\Flutter\Ecommerce\FlutterEcommerce\Server\uploads\images
2025-05-05 23:20:08.597 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - Successfully decoded JWT secret from Base64.
2025-05-05 23:20:08.613 [main] INFO  d.c.e.t.u.security.JwtTokenProvider - JWT Secret Key initialized successfully.
2025-05-05 23:20:10.507 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-05 23:20:14.041 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-05 23:20:14.733 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-05 23:20:15.556 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4854c964, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@726bbe64, org.springframework.security.web.context.SecurityContextHolderFilter@67a02460, org.springframework.security.web.header.HeaderWriterFilter@3182b7a2, org.springframework.web.filter.CorsFilter@7eb91b95, org.springframework.security.web.authentication.logout.LogoutFilter@4fe3d15f, demo.com.example.testserver.user.security.JwtAuthenticationFilter@93bc1be, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@704a0f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1529406e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74a89061, org.springframework.security.web.session.SessionManagementFilter@7c89133, org.springframework.security.web.access.ExceptionTranslationFilter@21e40707, org.springframework.security.web.access.intercept.AuthorizationFilter@4d9ef371]
2025-05-05 23:20:16.111 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-05 23:20:16.112 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-05 23:20:16.114 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-05-05 23:20:16.186 [main] INFO  d.c.e.t.u.c.UserControllerIntegrationTest - Started UserControllerIntegrationTest in 16.532 seconds (process running for 19.975)
2025-05-05 23:20:17.267 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0
2025-05-05 23:20:17.299 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0
2025-05-05 23:20:17.766 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:20:18.004 [main] DEBUG org.hibernate.SQL - insert into nguoi_dung (avatar_url,ngay_tao,diem_khach_hang_than_thiet,email,ho_ten,mat_khau,password_reset_token,password_reset_token_expiry,vai_tro,trang_thai,ngay_cap_nhat) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-05 23:20:18.061 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:20:18.068 [main] INFO  d.c.e.t.u.controller.AuthController - User registered successfully: ID [166], Email [test@example.com]
2025-05-05 23:20:18.333 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:20:18.582 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:20:18.584 [main] INFO  d.c.e.t.u.controller.AuthController - User [test@example.com] logged in successfully.
2025-05-05 23:20:18.679 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:20:18.685 [main] DEBUG org.hibernate.SQL - insert into danh_sach_dia_chi (ngay_tao,la_mac_dinh,so_dien_thoai,ho_ten_nguoi_nhan,dia_chi_cu_the,ngay_cap_nhat,nguoi_dung_id) values (?,?,?,?,?,?,?)
2025-05-05 23:20:18.707 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:20:18.741 [main] DEBUG org.hibernate.SQL - select a1_0.nguoi_dung_id,a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:20:18.849 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=?
2025-05-05 23:20:18.861 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.email=? and u1_0.trang_thai='kich_hoat'
2025-05-05 23:20:18.871 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.id=? and a1_0.nguoi_dung_id=?
2025-05-05 23:20:18.878 [main] INFO  d.c.e.t.u.service.AddressServiceImpl - Removed address with ID 56 for user test@example.com
2025-05-05 23:20:18.895 [main] DEBUG org.hibernate.SQL - delete from danh_sach_dia_chi where id=?
2025-05-05 23:20:18.900 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.id=?
2025-05-05 23:20:18.905 [main] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.avatar_url,u1_0.ngay_tao,u1_0.diem_khach_hang_than_thiet,u1_0.email,u1_0.ho_ten,u1_0.mat_khau,u1_0.password_reset_token,u1_0.password_reset_token_expiry,u1_0.vai_tro,u1_0.trang_thai,u1_0.ngay_cap_nhat from nguoi_dung u1_0 where u1_0.id=?
2025-05-05 23:20:18.913 [main] DEBUG org.hibernate.SQL - select a1_0.id,a1_0.ngay_tao,a1_0.la_mac_dinh,a1_0.so_dien_thoai,a1_0.ho_ten_nguoi_nhan,a1_0.dia_chi_cu_the,a1_0.ngay_cap_nhat,a1_0.nguoi_dung_id from danh_sach_dia_chi a1_0 where a1_0.nguoi_dung_id=?
2025-05-05 23:20:19.045 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-05 23:20:19.050 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-05 23:20:19.065 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
